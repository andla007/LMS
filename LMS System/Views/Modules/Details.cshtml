@model LMS_System.Models.Module

@{
    ViewBag.Title = "Details";
}

<h3>Details for module @Model.Name</h3>

<div>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.StartDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EndDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Activities)

        </dt>

        <dd>
            @{
                if (User.IsInRole("teacher"))
                {
                    //var mid = Model.FirstOrDefault(m => true).ModuleId;
                    <div>
                        @*@Html.ActionLink("Create New Activity", "Create","Activites", new { ModuleId = Model.Id })*@
                        @Html.ActionLink("Create New Activity", "Create", "Activities", new { ModuleId = Model.Id }, null)
                    </div>
                }
            }
            @foreach (var activity in Model.Activities)
            {
                @*<div>@activity.Name</div>*@
                @Html.ActionLink(activity.Name,"Index","Activities", new { id = Model.Id }, null)<br />

                if (User.IsInRole("student"))
                    { 
                <table>

                  @foreach (var DokumentName in (List<string>)ViewData["DocumentNames"])
                  {
                        <tr>
                            <td>
                                @DokumentName
                            </td>

                            <td>

                                @Html.ActionLink("Download", "Download", new { FileName = @DokumentName.ToString() })
                            </td>

                        </tr>
                  }

                </table>

                }

                if (User.IsInRole("teacher"))
                {

                    using (Html.BeginForm("Upload", "Modules", FormMethod.Post,
                                new { enctype = "multipart/form-data" }))
                    {
                    @Html.AntiForgeryToken()

                    <fieldset>
                        <legend>Upload a document</legend>
                        <div class="editor-field">
                            @Html.TextBox("file", "", new { type = "file" })
                        </div>
                        <div class="editor-field">
                            <input type="submit" value="Upload" />
                        </div>
                    </fieldset>
                    }
                }

            }
            @*@Html.ActionLink("Add activity", "Create", "Activities",
                                                   new { id = Model.Id, name = Model.Name },
                                                   new { @class = "btn btn-default" })*@
        </dd>



    </dl>
</div>

<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
    @Html.ActionLink("Back to List", "Details", "Courses", new { id = ViewBag.CourseID }, null)
</p>




