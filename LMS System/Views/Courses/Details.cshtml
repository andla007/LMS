@model LMS_System.Models.Course

@{
    ViewBag.Title = "Course Details";
}
<head>
    <link rel="stylesheet" href="~/Content/CourseDetails.css" type="text/css" />
</head>

<h2>Course Details</h2>

<div>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.StartDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndDate)
        </dt>


        <dd>
            @Html.DisplayFor(model => model.EndDate)
        </dd>

        <dt>
            Modules
        </dt>

        <dd>
            <table class="module">
                @if (User.IsInRole("student"))
            {
                    foreach (var module in Model.Modules)
                    {
                        <tr>
                            <td>
                                @Html.ActionLink(@module.Name, "Details", "Modules",
                                                 new { id = module.Id, courseID = Model.Id },
                                                 null)
                            </td>
                        </tr>
            }
                }
                else
                {
                    foreach (var module in Model.Modules)
{
                        <tr>
                            <td>
                                @Html.ActionLink(@module.Name, "Details", "Modules", 
                                                 new { id = module.Id, courseID = Model.Id }, 
                                                 null)
                            </td>
                            <td width="30">
                            </td>
                            <td>
                                @Html.ActionLink("Edit", "Edit", "Modules", new { id = module.Id }, null) |
                                @Html.ActionLink("Delete", "Delete", "Modules", new { id = module.Id }, null)
                            </td>
                            <td>
                        </tr>
                    }
                    <tr class="button">
                        <td>
                             <div>
                                 @Html.ActionLink("Add module", "Create", "Modules", 
                                                   new { id = Model.Id, name = Model.Name }, 
                                                   new { @class = "btn btn-default" })
                                 @Html.ActionLink("Add student", "CourseTeacherView", "Account",
                                                   new { id = Model.Id, orderBy ="firstname"},
                                                   new { @class = "btn btn-default" })
                             </div>
                        </td>
                    </tr>
}
            </table>
        </dd>
    </dl>
    <br/>
</div>
<p>
@if (User.IsInRole("teacher"))
{
    @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) <span>|</span>
}
    @Html.ActionLink("Back to List", "Index")
</p>
